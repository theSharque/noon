server {
	listen 80;
	server_name 21noon.com www.21noon.com xn--d1acqkbf0h.xn--80asehdb info.21noon.com;
        return 301 https://$server_name$request_uri;  # enforce https
}

#server {
#	listen 80;
#	server_name 21noon.com www.21noon.com xn--d1acqkbf0h.xn--80asehdb info.21noon.com;
#	root /var/www/noon;
#	charset windows-1251;
#	large_client_header_buffers 100 64K;

#	location / {
#	    index index.php;
#	    access_log 	/var/log/nginx/21noon.com.access.log ;
#	    access_log 	off;
#	    expires	1d;
#	    error_log 	/var/log/nginx/21noon.com.error.log ;
#	}

#	location ~* (\.inc|\.page|\.dic|\.lin|\.top|\.mdl|\.btm|\.bld|\.fnd|\.log|\.dat)$ {
#	    deny all;
#	}

#	location ~ \.php$ {
#		include		fastcgi_params;
#		fastcgi_pass	unix:/var/run/php5-fpm.sock;
#		fastcgi_index	index.php;
#		fastcgi_intercept_errors on;
#	}

#	error_page	404 =301 /404.php;
#}

server {
	listen 443;

	server_name 21noon.com www.21noon.com xn--d1acqkbf0h.xn--80asehdb info.21noon.com;
	root /var/www/noon;
	charset windows-1251;
	large_client_header_buffers 100 64K;

	ssl			on;
	ssl_certificate		/etc/nginx/ssl/noon.com.crt;
	ssl_certificate_key	/etc/nginx/ssl/noon.com.key;

	add_header              Front-End-Https    on;

	location / {
	    index index.php;
#	    access_log 	/var/log/nginx/21noon.com.access.log ;
	    access_log 	off;
	    expires	1d;
	    error_log 	/var/log/nginx/21noon.com.error.log ;
	}

	location ~* (\.inc|\.page|\.dic|\.lin|\.top|\.mdl|\.btm|\.bld|\.fnd|\.log|\.dat)$ {
	    deny all;
	}

	location ~ \.php$ {
		include		fastcgi_params;
		fastcgi_pass	unix:/var/run/php5-fpm.sock;
		fastcgi_index	index.php;
		fastcgi_intercept_errors on;
	}

	error_page	404 =301 /404.php;
}
